#! /bin/bash

lsblk -lno NAME,TYPE,SIZE | grep 'disk' | awk '{if (NR!=0) {print}}' | sed '/sr/d' | awk '{print "/dev/" $1 " "  $3}' | sort -iu | sed "$d"  > devices
sed -i ':a;N;$!ba;s/\n/ !/g' devices
sed -i "$d" devices

devices=$(awk '{print $0 " " }' devices )

disk=$(yad --skip-taskbar --center --geometry=400x100 --window-icon=drive-harddisk \
--button="Seleccionar:0" --buttons-layout="center" --borders="10" \
--title "Selecciona tu Disco Duro" --form \
--field="Selección de Disco: :CB" "$devices")

disco=$(echo $disk | awk '{print $1}')

maxvalue=$(sudo fdisk -l ${disco} | grep "bytes," | awk '{print $5}' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' | sed -e's/.$//' )

let maxvalue=$maxvalue-30

homeauto=$(yad --scale --text "  Define el tamaño en GiB para Home" --value="20" --step="10" --min-value="20" --max-value=${maxvalue} \
--inc-buttons --mark=[GiB]:25 \
--button="Confirmar:0" --buttons-layout="center" --borders="20" \
--image="drive-harddisk" --window-icon="drive-harddisk" \
--title="Partición Home" --width=330)




